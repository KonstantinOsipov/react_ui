{"ast":null,"code":"var _jsxFileName = \"/home/ivan/Documents/projects/metatx-standard-playground/example/react-ui/src/components/Web3_EIP2771_EIP712Sign.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport Button from \"@material-ui/core/Button\";\nimport { NotificationContainer, NotificationManager } from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Web3 from \"web3\";\nimport { Biconomy } from \"@biconomy/mexa\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { Box } from \"@material-ui/core\";\n\nlet sigUtil = require(\"eth-sig-util\");\n\nlet config = {\n  contract: {\n    address: \"0x765059C2EE625960D1fEdD44Ab2B438Ae19dA711\",\n    abi: [{\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"spender\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"value\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"Approval\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"_account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"Blacklisted\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"previousOwner\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"newOwner\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"OwnershipTransferred\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"Paused\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"value\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"Transfer\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"from\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"value\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"bytes\",\n        \"name\": \"data\",\n        \"type\": \"bytes\"\n      }],\n      \"name\": \"Transfer\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"_account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"UnBlacklisted\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"Unpaused\",\n      \"type\": \"event\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"owner\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"address\",\n        \"name\": \"spender\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"allowance\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"spender\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"approve\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"balanceOf\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"blacklist\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"bridgeContract\",\n      \"outputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"burn\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_token\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"address\",\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"claimTokens\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"decimals\",\n      \"outputs\": [{\n        \"internalType\": \"uint8\",\n        \"name\": \"\",\n        \"type\": \"uint8\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"spender\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"subtractedValue\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"decreaseAllowance\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"spender\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"addedValue\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"increaseAllowance\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"initialize\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"isBlacklisted\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_address\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"isBridge\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"forwarder\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"isTrustedForwarder\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"_amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"mint\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"name\",\n      \"outputs\": [{\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"owner\",\n      \"outputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"pause\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"paused\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"contract IERC20Upgradeable\",\n        \"name\": \"tokenContract\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"address\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"rescueERC20\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address payable\",\n        \"name\": \"to\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"rescueEther\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_bridgeContract\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"setBridgeContract\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"trustedForwarder\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"setTrustedForwarder\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"symbol\",\n      \"outputs\": [{\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"totalSupply\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"recipient\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"value\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"transfer\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"recipient\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"value\",\n        \"type\": \"uint256\"\n      }, {\n        \"internalType\": \"bytes\",\n        \"name\": \"data\",\n        \"type\": \"bytes\"\n      }],\n      \"name\": \"transferAndCall\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"sender\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"address\",\n        \"name\": \"recipient\",\n        \"type\": \"address\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"transferFrom\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"newOwner\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"transferOwnership\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"address\",\n        \"name\": \"_account\",\n        \"type\": \"address\"\n      }],\n      \"name\": \"unBlacklist\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"unpause\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"versionRecipient\",\n      \"outputs\": [{\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }]\n  },\n  apiKey: {\n    test: \"pjFNjU6SC.b1ef87c2-7a3a-4290-a026-3e71076d1124\",\n    prod: \"pjFNjU6SC.b1ef87c2-7a3a-4290-a026-3e71076d1124\"\n  }\n};\nlet web3, walletWeb3, biconomy;\nlet contract;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > * + *': {\n      marginLeft: theme.spacing(2)\n    }\n  },\n  link: {\n    marginLeft: \"5px\"\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n    opacity: '.85!important',\n    background: '#000'\n  }\n}));\n\nfunction App() {\n  const classes = useStyles();\n\n  const preventDefault = event => event.preventDefault();\n\n  const [backdropOpen, setBackdropOpen] = React.useState(true);\n  const [loadingMessage, setLoadingMessage] = React.useState(\" Loading Application ...\");\n  const [quote, setQuote] = useState(\"This is a default quote\");\n  const [owner, setOwner] = useState(\"Default Owner Address\");\n  const [newQuote, setNewQuote] = useState(\"\");\n  const [selectedAddress, setSelectedAddress] = useState(\"\");\n  const [metaTxEnabled, setMetaTxEnabled] = useState(true);\n  const [transactionHash, setTransactionHash] = useState(\"\");\n  useEffect(() => {\n    async function init() {\n      if (typeof window.ethereum !== \"undefined\" && window.ethereum.isMetaMask) {\n        // Ethereum user detected. You can now use the provider.\n        const provider = window[\"ethereum\"];\n        await provider.enable();\n        let kovanProvider = new Web3.providers.HttpProvider(\"https://kovan.infura.io/v3/d126f392798444609246423b06116c77\");\n        setLoadingMessage(\"Initializing Biconomy ...\");\n        biconomy = new Biconomy(kovanProvider, {\n          walletProvider: window.ethereum,\n          apiKey: config.apiKey.prod,\n          debug: true\n        }); // This web3 instance is used to read normally and write to contract via meta transactions.\n\n        web3 = new Web3(biconomy); // This web3 instance is used to get user signature from connected wallet\n\n        walletWeb3 = new Web3(window.ethereum);\n        biconomy.onEvent(biconomy.READY, () => {\n          // Initialize your dapp here like getting user accounts etc\n          contract = new web3.eth.Contract(config.contract.abi, config.contract.address);\n          setSelectedAddress(provider.selectedAddress);\n          getQuoteFromNetwork();\n          provider.on(\"accountsChanged\", function (accounts) {\n            setSelectedAddress(accounts[0]);\n          });\n        }).onEvent(biconomy.ERROR, (error, message) => {// Handle error while initializing mexa\n        });\n      } else {\n        showErrorMessage(\"Metamask not installed\");\n      }\n    }\n\n    init();\n  }, []);\n\n  const handleClose = () => {\n    setBackdropOpen(false);\n  };\n\n  const handleToggle = () => {\n    setBackdropOpen(!backdropOpen);\n  };\n\n  const onQuoteChange = event => {\n    setNewQuote(event.target.value);\n  };\n\n  const onSubmitWithPrivateKey = async () => {\n    if (newQuote != \"\" && contract) {\n      setTransactionHash(\"\");\n      console.log(\"Sending meta transaction\");\n      let privateKey = \"2ef295b86aa9d40ff8835a9fe852942ccea0b7c757fad5602dfa429bcdaea910\";\n      let userAddress = \"0xE1E763551A85F04B4687f0035885E7F710A46aA6\";\n      let txParams = {\n        \"from\": userAddress,\n        \"to\": config.contract.address,\n        \"data\": contract.methods.setQuote(newQuote).encodeABI(),\n        \"gasLimit\": web3.utils.toHex(300000)\n      };\n      const signedTx = await web3.eth.accounts.signTransaction(txParams, `0x${privateKey}`);\n      const forwardData = await biconomy.getForwardRequestAndMessageToSign(signedTx.rawTransaction);\n      const signature = sigUtil.signTypedMessage(new Buffer.from(privateKey, 'hex'), {\n        data: forwardData.eip712Format\n      }, 'V4');\n      let rawTransaction = signedTx.rawTransaction;\n      let data = {\n        signature: signature,\n        forwardRequest: forwardData.request,\n        rawTransaction: rawTransaction,\n        signatureType: biconomy.EIP712_SIGN\n      };\n      web3.eth.sendSignedTransaction(data).on('transactionHash', hash => {\n        console.log(`Transaction hash is ${hash}`);\n        showInfoMessage(`Transaction sent via Biconomy. Waiting for confirmation.`);\n      }).once('confirmation', (confirmation, receipt) => {\n        console.log(`Transaction Confirmed.`);\n        console.log(receipt);\n        setTransactionHash(receipt.transactionHash);\n        showSuccessMessage(\"Transaction confirmed\");\n        getQuoteFromNetwork();\n      });\n    } else {\n      showErrorMessage(\"Please enter the quote\");\n    }\n  };\n\n  const onSubmit = async event => {\n    if (newQuote != \"\" && contract) {\n      setTransactionHash(\"\");\n\n      if (metaTxEnabled) {\n        try {\n          let tx = contract.methods.transfer(\"0x7FcDa7856764cf6984d53bC997e660502b675184\", newQuote).send({\n            from: selectedAddress,\n            signatureType: biconomy.EIP712_SIGN\n          });\n          tx.on(\"transactionHash\", function (hash) {\n            console.log(`Transaction hash is ${hash}`);\n            showInfoMessage(`Transaction via Biconomy sent. Waiting for confirmation ..`);\n          }).once(\"confirmation\", function (confirmationNumber, receipt) {\n            console.log(receipt);\n            setTransactionHash(receipt.transactionHash);\n            showSuccessMessage(\"Transaction confirmed on chain\");\n            getQuoteFromNetwork();\n          }).on('error', function (error, receipt) {\n            console.log(error);\n          });\n        } catch (err) {\n          console.log(\"handle errors like signature denied here\");\n          console.log(err);\n        }\n      } else {\n        console.log(\"Sending normal transaction\");\n        contract.methods.setQuote(newQuote).send({\n          from: selectedAddress\n        }).on(\"transactionHash\", function (hash) {\n          showInfoMessage(`Transaction sent to blockchain with hash ${hash}`);\n        }).once(\"confirmation\", function (confirmationNumber, receipt) {\n          setTransactionHash(receipt.transactionHash);\n          showSuccessMessage(\"Transaction confirmed\");\n          getQuoteFromNetwork();\n        });\n      }\n    } else {\n      showErrorMessage(\"Please enter the quote\");\n    }\n  };\n\n  const getSignatureParameters = signature => {\n    if (!web3.utils.isHexStrict(signature)) {\n      throw new Error('Given value \"'.concat(signature, '\" is not a valid hex string.'));\n    }\n\n    var r = signature.slice(0, 66);\n    var s = \"0x\".concat(signature.slice(66, 130));\n    var v = \"0x\".concat(signature.slice(130, 132));\n    v = web3.utils.hexToNumber(v);\n    if (![27, 28].includes(v)) v += 27;\n    return {\n      r: r,\n      s: s,\n      v: v\n    };\n  };\n\n  const getQuoteFromNetwork = () => {\n    setLoadingMessage(\"Getting Quote from contact ...\");\n\n    try {\n      if (web3 && contract) {\n        contract.methods.getQuote().call().then(function (result) {\n          handleClose();\n          console.log(result);\n\n          if (result && result.currentQuote != undefined && result.currentOwner != undefined) {\n            if (result.currentQuote == \"\") {\n              showErrorMessage(\"No quotes set on blockchain yet\");\n            } else {\n              setQuote(result.currentQuote);\n              setOwner(result.currentOwner);\n            }\n          } else {\n            showErrorMessage(\"Not able to get quote information from Network\");\n          }\n        });\n      } else {\n        handleClose();\n      }\n    } catch (error) {\n      handleClose();\n      console.log(error);\n    }\n  };\n\n  const showErrorMessage = message => {\n    NotificationManager.error(message, \"Error\", 5000);\n  };\n\n  const showSuccessMessage = message => {\n    NotificationManager.success(message, \"Message\", 3000);\n  };\n\n  const showInfoMessage = message => {\n    NotificationManager.info(message, \"Info\", 3000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"top-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-row-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 21\n    }\n  }, \"Library \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }, \"web3.js\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-row-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  }, \"Meta Transaction\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, \"EIP-2771\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-row-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }, \"Signature Type\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 21\n    }\n  }, \"EIP712 Signature\"))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-wrap mb-style-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"blockquote\", {\n    cite: \"http://www.gutenberg.org/ebboks/11\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 25\n    }\n  }, quote))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-attribution\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 21\n    }\n  }, owner), selectedAddress.toLowerCase() === owner.toLowerCase() && /*#__PURE__*/React.createElement(\"cite\", {\n    className: \"owner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 25\n    }\n  }, \"You are the owner of the quote\"), selectedAddress.toLowerCase() !== owner.toLowerCase() && /*#__PURE__*/React.createElement(\"cite\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 25\n    }\n  }, \"You are not the owner of the quote\"))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, transactionHash !== \"\" && /*#__PURE__*/React.createElement(Box, {\n    className: classes.root,\n    mt: 2,\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 44\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 21\n    }\n  }, \"Check your transaction hash\", /*#__PURE__*/React.createElement(Link, {\n    href: `https://kovan.etherscan.io/tx/${transactionHash}`,\n    target: \"_blank\",\n    className: classes.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }\n  }, \"here\")))), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter your quote\",\n    onChange: onQuoteChange,\n    value: newQuote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 25\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: onSubmitWithPrivateKey,\n    style: {\n      marginLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 25\n    }\n  }, \"Submit (using private key)\")))), /*#__PURE__*/React.createElement(Backdrop, {\n    className: classes.backdrop,\n    open: backdropOpen,\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingLeft: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 17\n    }\n  }, loadingMessage)), /*#__PURE__*/React.createElement(NotificationContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/ivan/Documents/projects/metatx-standard-playground/example/react-ui/src/components/Web3_EIP2771_EIP712Sign.js"],"names":["React","useState","useEffect","Button","NotificationContainer","NotificationManager","Backdrop","CircularProgress","Web3","Biconomy","makeStyles","Link","Typography","Box","sigUtil","require","config","contract","address","abi","apiKey","test","prod","web3","walletWeb3","biconomy","useStyles","theme","root","marginLeft","spacing","link","backdrop","zIndex","drawer","color","opacity","background","App","classes","preventDefault","event","backdropOpen","setBackdropOpen","loadingMessage","setLoadingMessage","quote","setQuote","owner","setOwner","newQuote","setNewQuote","selectedAddress","setSelectedAddress","metaTxEnabled","setMetaTxEnabled","transactionHash","setTransactionHash","init","window","ethereum","isMetaMask","provider","enable","kovanProvider","providers","HttpProvider","walletProvider","debug","onEvent","READY","eth","Contract","getQuoteFromNetwork","on","accounts","ERROR","error","message","showErrorMessage","handleClose","handleToggle","onQuoteChange","target","value","onSubmitWithPrivateKey","console","log","privateKey","userAddress","txParams","methods","encodeABI","utils","toHex","signedTx","signTransaction","forwardData","getForwardRequestAndMessageToSign","rawTransaction","signature","signTypedMessage","Buffer","from","data","eip712Format","forwardRequest","request","signatureType","EIP712_SIGN","sendSignedTransaction","hash","showInfoMessage","once","confirmation","receipt","showSuccessMessage","onSubmit","tx","transfer","send","confirmationNumber","err","getSignatureParameters","isHexStrict","Error","concat","r","slice","s","v","hexToNumber","includes","getQuote","call","then","result","currentQuote","undefined","currentOwner","success","info","toLowerCase","paddingLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"../App.css\";\nimport Button from \"@material-ui/core/Button\";\nimport {\n    NotificationContainer,\n    NotificationManager\n} from \"react-notifications\";\nimport \"react-notifications/lib/notifications.css\";\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport Web3 from \"web3\";\nimport { Biconomy } from \"@biconomy/mexa\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport { Box } from \"@material-ui/core\";\nlet sigUtil = require(\"eth-sig-util\");\nlet config = {\n    contract: {\n        address: \"0x765059C2EE625960D1fEdD44Ab2B438Ae19dA711\",\n        abi: [{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"Blacklisted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Paused\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"UnBlacklisted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Unpaused\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"blacklist\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bridgeContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"claimTokens\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"subtractedValue\",\"type\":\"uint256\"}],\"name\":\"decreaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"addedValue\",\"type\":\"uint256\"}],\"name\":\"increaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"isBlacklisted\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"isBridge\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"forwarder\",\"type\":\"address\"}],\"name\":\"isTrustedForwarder\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"mint\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IERC20Upgradeable\",\"name\":\"tokenContract\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"rescueERC20\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"to\",\"type\":\"address\"}],\"name\":\"rescueEther\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_bridgeContract\",\"type\":\"address\"}],\"name\":\"setBridgeContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"trustedForwarder\",\"type\":\"address\"}],\"name\":\"setTrustedForwarder\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"transferAndCall\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"unBlacklist\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"versionRecipient\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]\n    },\n    apiKey: {\n        test: \"pjFNjU6SC.b1ef87c2-7a3a-4290-a026-3e71076d1124\",\n        prod: \"pjFNjU6SC.b1ef87c2-7a3a-4290-a026-3e71076d1124\"\n    }\n}\n\nlet web3, walletWeb3, biconomy;\nlet contract;\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        '& > * + *': {\n            marginLeft: theme.spacing(2),\n        },\n    },\n    link: {\n        marginLeft: \"5px\"\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n        opacity: '.85!important',\n        background: '#000'\n    },\n}));\n\nfunction App() {\n    const classes = useStyles();\n    const preventDefault = (event) => event.preventDefault();\n    const [backdropOpen, setBackdropOpen] = React.useState(true);\n    const [loadingMessage, setLoadingMessage] = React.useState(\" Loading Application ...\");\n    const [quote, setQuote] = useState(\"This is a default quote\");\n    const [owner, setOwner] = useState(\"Default Owner Address\");\n    const [newQuote, setNewQuote] = useState(\"\");\n    const [selectedAddress, setSelectedAddress] = useState(\"\");\n    const [metaTxEnabled, setMetaTxEnabled] = useState(true);\n    const [transactionHash, setTransactionHash] = useState(\"\");\n\n    useEffect(() => {\n        async function init() {\n            if (\n                typeof window.ethereum !== \"undefined\" &&\n                window.ethereum.isMetaMask\n            ) {\n                // Ethereum user detected. You can now use the provider.\n                const provider = window[\"ethereum\"];\n                await provider.enable();\n                let kovanProvider = new Web3.providers.HttpProvider(\"https://kovan.infura.io/v3/d126f392798444609246423b06116c77\");\n                setLoadingMessage(\"Initializing Biconomy ...\");\n                biconomy = new Biconomy(kovanProvider, {\n                    walletProvider: window.ethereum,\n                    apiKey: config.apiKey.prod,\n                    debug: true\n                });\n\n                // This web3 instance is used to read normally and write to contract via meta transactions.\n                web3 = new Web3(biconomy);\n\n                // This web3 instance is used to get user signature from connected wallet\n                walletWeb3 = new Web3(window.ethereum);\n\n                biconomy.onEvent(biconomy.READY, () => {\n                    // Initialize your dapp here like getting user accounts etc\n                    contract = new web3.eth.Contract(\n                        config.contract.abi,\n                        config.contract.address\n                    );\n                    setSelectedAddress(provider.selectedAddress);\n                    getQuoteFromNetwork();\n                    provider.on(\"accountsChanged\", function (accounts) {\n                        setSelectedAddress(accounts[0]);\n                    });\n                }).onEvent(biconomy.ERROR, (error, message) => {\n                    // Handle error while initializing mexa\n                });\n            } else {\n                showErrorMessage(\"Metamask not installed\");\n            }\n        }\n        init();\n    }, []);\n\n    const handleClose = () => {\n        setBackdropOpen(false);\n    };\n\n    const handleToggle = () => {\n        setBackdropOpen(!backdropOpen);\n    };\n\n    const onQuoteChange = event => {\n        setNewQuote(event.target.value);\n    };\n\n    const onSubmitWithPrivateKey = async () => {\n        if (newQuote != \"\" && contract) {\n            setTransactionHash(\"\");\n            console.log(\"Sending meta transaction\");\n            let privateKey = \"2ef295b86aa9d40ff8835a9fe852942ccea0b7c757fad5602dfa429bcdaea910\";\n            let userAddress = \"0xE1E763551A85F04B4687f0035885E7F710A46aA6\";\n            let txParams = {\n                \"from\": userAddress,\n                \"to\": config.contract.address,\n                \"data\": contract.methods.setQuote(newQuote).encodeABI(),\n                \"gasLimit\": web3.utils.toHex(300000),\n            };\n            const signedTx = await web3.eth.accounts.signTransaction(txParams, `0x${privateKey}`);\n            const forwardData = await biconomy.getForwardRequestAndMessageToSign(signedTx.rawTransaction);\n            const signature = sigUtil.signTypedMessage(new Buffer.from(privateKey, 'hex'),\n                { data: forwardData.eip712Format }, 'V4');\n            let rawTransaction = signedTx.rawTransaction;\n            let data = {\n                signature: signature,\n                forwardRequest: forwardData.request,\n                rawTransaction: rawTransaction,\n                signatureType: biconomy.EIP712_SIGN\n            };\n\n            web3.eth.sendSignedTransaction(data)\n                .on('transactionHash', (hash) => {\n                    console.log(`Transaction hash is ${hash}`)\n                    showInfoMessage(`Transaction sent via Biconomy. Waiting for confirmation.`);\n                })\n                .once('confirmation', (confirmation, receipt) => {\n                    console.log(`Transaction Confirmed.`);\n                    console.log(receipt);\n                    setTransactionHash(receipt.transactionHash);\n                    showSuccessMessage(\"Transaction confirmed\");\n                    getQuoteFromNetwork();\n                });\n\n        } else {\n            showErrorMessage(\"Please enter the quote\");\n        }\n    }\n\n    const onSubmit = async event => {\n        if (newQuote != \"\" && contract) {\n            setTransactionHash(\"\");\n            if (metaTxEnabled) {\n                try {\n                    let tx = contract.methods\n                    .transfer(\"0x7FcDa7856764cf6984d53bC997e660502b675184\", newQuote)\n                    .send({\n                        from: selectedAddress,\n                        signatureType: biconomy.EIP712_SIGN\n                    });\n\n                    tx.on(\"transactionHash\", function (hash) {\n                        console.log(`Transaction hash is ${hash}`);\n                        showInfoMessage(`Transaction via Biconomy sent. Waiting for confirmation ..`);\n                    }).once(\"confirmation\", function (confirmationNumber, receipt) {\n                        console.log(receipt);\n                        setTransactionHash(receipt.transactionHash);\n                        showSuccessMessage(\"Transaction confirmed on chain\");\n                        getQuoteFromNetwork();\n                    }).on('error', function (error, receipt) {\n                        console.log(error);\n                    });\n                } catch (err) {\n                    console.log(\"handle errors like signature denied here\");\n                    console.log(err);\n                }\n\n\n            } else {\n                console.log(\"Sending normal transaction\");\n                contract.methods\n                    .setQuote(newQuote)\n                    .send({ from: selectedAddress })\n                    .on(\"transactionHash\", function (hash) {\n                        showInfoMessage(`Transaction sent to blockchain with hash ${hash}`);\n                    })\n                    .once(\"confirmation\", function (confirmationNumber, receipt) {\n                        setTransactionHash(receipt.transactionHash);\n                        showSuccessMessage(\"Transaction confirmed\");\n                        getQuoteFromNetwork();\n                    });\n            }\n        } else {\n            showErrorMessage(\"Please enter the quote\");\n        }\n    };\n\n    const getSignatureParameters = signature => {\n        if (!web3.utils.isHexStrict(signature)) {\n            throw new Error(\n                'Given value \"'.concat(signature, '\" is not a valid hex string.')\n            );\n        }\n        var r = signature.slice(0, 66);\n        var s = \"0x\".concat(signature.slice(66, 130));\n        var v = \"0x\".concat(signature.slice(130, 132));\n        v = web3.utils.hexToNumber(v);\n        if (![27, 28].includes(v)) v += 27;\n        return {\n            r: r,\n            s: s,\n            v: v\n        };\n    };\n\n    const getQuoteFromNetwork = () => {\n        setLoadingMessage(\"Getting Quote from contact ...\");\n        try {\n            if (web3 && contract) {\n                contract.methods\n                    .getQuote()\n                    .call()\n                    .then(function (result) {\n                        handleClose();\n                        console.log(result);\n                        if (\n                            result &&\n                            result.currentQuote != undefined &&\n                            result.currentOwner != undefined\n                        ) {\n                            if (result.currentQuote == \"\") {\n                                showErrorMessage(\"No quotes set on blockchain yet\");\n                            } else {\n                                setQuote(result.currentQuote);\n                                setOwner(result.currentOwner);\n                            }\n                        } else {\n                            showErrorMessage(\"Not able to get quote information from Network\");\n                        }\n                    });\n            } else {\n                handleClose();\n            }\n        } catch (error) {\n            handleClose();\n            console.log(error);\n        }\n    };\n\n    const showErrorMessage = message => {\n        NotificationManager.error(message, \"Error\", 5000);\n    };\n\n    const showSuccessMessage = message => {\n        NotificationManager.success(message, \"Message\", 3000);\n    };\n\n    const showInfoMessage = message => {\n        NotificationManager.info(message, \"Info\", 3000);\n    };\n\n    return (\n        <div className=\"App\">\n            <section className=\"top-row\">\n                <div className=\"top-row-item\">\n                    <span className=\"label\">Library </span>\n                    <span className=\"label-value\">web3.js</span>\n                </div>\n                <div className=\"top-row-item\">\n                    <span className=\"label\">Meta Transaction</span>\n                    <span className=\"label-value\">EIP-2771</span>\n                </div>\n                <div className=\"top-row-item\">\n                    <span className=\"label\">Signature Type</span>\n                    <span className=\"label-value\">EIP712 Signature</span>\n                </div>\n            </section>\n            <section className=\"main\">\n                <div className=\"mb-wrap mb-style-2\">\n                    <blockquote cite=\"http://www.gutenberg.org/ebboks/11\">\n                        <p>{quote}</p>\n                    </blockquote>\n                </div>\n\n                <div className=\"mb-attribution\">\n                    <p className=\"mb-author\">{owner}</p>\n                    {selectedAddress.toLowerCase() === owner.toLowerCase() && (\n                        <cite className=\"owner\">You are the owner of the quote</cite>\n                    )}\n                    {selectedAddress.toLowerCase() !== owner.toLowerCase() && (\n                        <cite>You are not the owner of the quote</cite>\n                    )}\n                </div>\n            </section>\n            <section>\n                {transactionHash !== \"\" && <Box className={classes.root} mt={2} p={2}>\n                    <Typography>\n                        Check your transaction hash\n            <Link href={`https://kovan.etherscan.io/tx/${transactionHash}`} target=\"_blank\"\n                            className={classes.link}>\n                            here\n            </Link>\n                    </Typography>\n                </Box>}\n            </section>\n            <section>\n                <div className=\"submit-container\">\n                    <div className=\"submit-row\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter your quote\"\n                            onChange={onQuoteChange}\n                            value={newQuote}\n                        />\n                        <Button variant=\"contained\" color=\"primary\" onClick={onSubmit}>\n                            Submit\n            </Button>\n                        <Button variant=\"contained\" color=\"primary\" onClick={onSubmitWithPrivateKey} style={{ marginLeft: \"10px\" }}>\n                            Submit (using private key)\n            </Button>\n                    </div>\n                </div>\n            </section>\n            <Backdrop className={classes.backdrop} open={backdropOpen} onClick={handleClose}>\n                <CircularProgress color=\"inherit\" />\n                <div style={{ paddingLeft: \"10px\" }}>{loadingMessage}</div>\n            </Backdrop>\n            <NotificationContainer />\n        </div>\n    );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}